<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Connect 4 - Sunny Jamil</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Style for the empty slots on the board */
        .slot {
            width: 70px;
            height: 70px;
            background-color: #e5e7eb; /* gray-200 */
            border-radius: 50%;
        }
        /* Styles for the player pieces */
        .player-red {
            background-color: #ef4444; /* red-500 */
        }
        .player-yellow {
            background-color: #f59e0b; /* amber-500 */
        }
        /* Style for indicating the winning pieces */
        .winner {
            animation: pulse-winner 0.8s infinite ease-in-out;
            border: 3px solid #10b981; /* A thicker emerald-500 border */
        }
        @keyframes pulse-winner {
            0%, 100% {
                transform: scale(1);
                box-shadow: 0 0 8px 4px rgba(16, 185, 129, 0.6);
            }
            50% {
                transform: scale(1.05);
                box-shadow: 0 0 16px 8px rgba(16, 185, 129, 0.3);
            }
        }
        /* Hover effect to show where a piece will be dropped */
        .column:hover .slot:not(.player-red):not(.player-yellow):last-child {
            background-color: #d1d5db; /* gray-300 */
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <!-- Header & Navigation -->
    <header class="bg-white/80 backdrop-blur-md sticky top-0 z-50 border-b border-gray-200">
        <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <!-- Site Name -->
                <div class="flex-shrink-0">
                    <a href="../index.html" class="text-2xl font-bold text-gray-900">Sunny Jamil</a>
                </div>
                <!-- Desktop Navigation Links -->
                <nav class="hidden md:flex md:space-x-8">
                    <a href="../resume.html" class="text-gray-600 hover:text-indigo-600 transition-colors">Resume</a>
                    <a href="../projects.html" class="text-indigo-600 font-semibold transition-colors">Projects</a>
                    <a href="../wishlist.html" class="text-gray-600 hover:text-indigo-600 transition-colors">Wishlist</a>
                    <a href="../contact.html" class="text-gray-600 hover:text-indigo-600 transition-colors">Scheduling</a>
                    <a href="../payments.html" class="text-gray-600 hover:text-indigo-600 transition-colors">Payments</a>
                </nav>
            </div>
        </div>
    </header>

    <!-- Main Content for Connect 4 Game -->
    <main>
        <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-12 flex flex-col items-center">
            
            <h1 class="text-4xl font-bold text-gray-900 mb-2">Connect 4</h1>
            <p id="status-message" class="text-lg text-gray-600 mb-6 font-semibold">Red's Turn</p>
            
            <div id="game-board" class="grid grid-cols-7 gap-2 bg-blue-600 p-3 rounded-lg shadow-2xl">
                <!-- Columns and slots will be generated by JavaScript -->
            </div>

            <button id="restart-button" class="mt-8 bg-indigo-600 text-white font-semibold py-2 px-6 rounded-lg shadow-md hover:bg-indigo-700 transition-all duration-300">
                New Game
            </button>

        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-white border-t border-gray-200 mt-auto">
        <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-6 text-center text-gray-500">
            <p>&copy; 2025 Sunny Jamil. All Rights Reserved.</p>
        </div>
    </footer>

    <script>
        const COLUMNS = 7;
        const ROWS = 6;
        const boardElement = document.getElementById('game-board');
        const statusMessage = document.getElementById('status-message');
        const restartButton = document.getElementById('restart-button');

        let boardState = Array(ROWS).fill(null).map(() => Array(COLUMNS).fill(null));
        let currentPlayer = 'red';
        let gameOver = false;

        function createBoard() {
            boardElement.innerHTML = '';
            for (let c = 0; c < COLUMNS; c++) {
                const column = document.createElement('div');
                column.classList.add('column', 'flex', 'flex-col-reverse', 'gap-2');
                column.dataset.column = c;
                column.addEventListener('click', handleColumnClick);
                for (let r = 0; r < ROWS; r++) {
                    const slot = document.createElement('div');
                    slot.classList.add('slot');
                    slot.dataset.row = r;
                    slot.dataset.column = c;
                    column.appendChild(slot);
                }
                boardElement.appendChild(column);
            }
        }

        function handleColumnClick(event) {
            if (gameOver) return;

            const column = event.currentTarget;
            const colIndex = parseInt(column.dataset.column);

            const availableRow = findAvailableRow(colIndex);
            if (availableRow === -1) return; // Column is full

            dropPiece(availableRow, colIndex);
            
            if (checkForWin(availableRow, colIndex)) {
                endGame(false);
            } else if (checkForDraw()) {
                endGame(true);
            } else {
                switchPlayer();
            }
        }

        function findAvailableRow(colIndex) {
            for (let r = 0; r < ROWS; r++) {
                if (boardState[r][colIndex] === null) {
                    return r;
                }
            }
            return -1; // No available row
        }

        function dropPiece(row, col) {
            boardState[row][col] = currentPlayer;
            const slot = document.querySelector(`.slot[data-row='${row}'][data-column='${col}']`);
            slot.classList.add(currentPlayer === 'red' ? 'player-red' : 'player-yellow');
        }

        function switchPlayer() {
            currentPlayer = currentPlayer === 'red' ? 'yellow' : 'red';
            statusMessage.textContent = `${currentPlayer.charAt(0).toUpperCase() + currentPlayer.slice(1)}'s Turn`;
        }
        
        function checkForDraw() {
            return boardState.every(row => row.every(cell => cell !== null));
        }

        function checkForWin(row, col) {
            const player = boardState[row][col];
            
            function checkDirection(rowOffset, colOffset) {
                let count = 0;
                let winningPieces = [];
                // Check in one direction
                for (let i = 1; i < 4; i++) {
                    const r = row + i * rowOffset;
                    const c = col + i * colOffset;
                    if (r >= 0 && r < ROWS && c >= 0 && c < COLUMNS && boardState[r][c] === player) {
                        count++;
                        winningPieces.push({ r, c });
                    } else {
                        break;
                    }
                }
                // Check in the opposite direction
                for (let i = 1; i < 4; i++) {
                    const r = row - i * rowOffset;
                    const c = col - i * colOffset;
                    if (r >= 0 && r < ROWS && c >= 0 && c < COLUMNS && boardState[r][c] === player) {
                        count++;
                        winningPieces.push({ r, c });
                    } else {
                        break;
                    }
                }

                if (count >= 3) {
                    winningPieces.push({ r: row, c: col });
                    return winningPieces;
                }
                return null;
            }

            const directions = [[0, 1], [1, 0], [1, 1], [1, -1]]; // Horizontal, Vertical, Diag Down, Diag Up
            for (const [rowOffset, colOffset] of directions) {
                const winningPieces = checkDirection(rowOffset, colOffset);
                if (winningPieces) {
                    highlightWinners(winningPieces);
                    return true;
                }
            }
            return false;
        }

        function highlightWinners(pieces) {
            pieces.forEach(piece => {
                const slot = document.querySelector(`.slot[data-row='${piece.r}'][data-column='${piece.c}']`);
                slot.classList.add('winner');
            });
        }

        function endGame(isDraw) {
            gameOver = true;
            if (isDraw) {
                statusMessage.textContent = "It's a Draw!";
            } else {
                statusMessage.textContent = `${currentPlayer.charAt(0).toUpperCase() + currentPlayer.slice(1)} wins!`;
            }
        }

        function restartGame() {
            boardState = Array(ROWS).fill(null).map(() => Array(COLUMNS).fill(null));
            currentPlayer = 'red';
            gameOver = false;
            statusMessage.textContent = "Red's Turn";
            createBoard();
        }

        restartButton.addEventListener('click', restartGame);
        createBoard();

    </script>
</body>
</html>